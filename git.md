# Git 使用规范

针对 git 仓库管理混乱，导致开发者经常犯一些代码同步的错误，故针对公司业务情况整理了如下使用规范。

## 常规项目（一个项目仓库对应一个线上链接）

每个 Git 仓库至少要有两个长期分支`master`和`dev`，常规需求在 `dev` 分支上面开发即可，上线合并到 `master` 分支。

- **master**：用于和线上代码保持同步，**禁止直接修改代码**；
- **dev**：用于常规需求开发，开发测试完成合并到 `master` 分支上；
- **feature/xxxx**：需求（功能）分支，“xxxx”根据具体需求命名。

**特殊情况处理：**

同一个项目仓库同时接到多个需求的情况：<br /> 如发现常规 A 需求未开发完，来了紧急 B 需求需要先上线的情况，请按照这个规则处理：<br/> **基于`master`分支**新建一个 B 需求的分支(`git checkout master && git checkout -b freature/B`)，等 B 需求开发测试完成了，再把 B 需求分支`feature/B`合并到`master`分支同时合并到`dev`分支，然后删除 B 需求分支（`git branch -d feature/B`），接着开发 A 需求，A 需求开发测试完成之后合并到`master`分支。

> 暂时只考虑到这种情况，有更复杂情况的话，请提出来。

## 特殊项目（一个项目仓库对应多个线上链接，如活动项目）

原则上每来一个活动新建一个项目仓库就可以按照常规项目规范处理，但是有些活动页面少、业务简单、维护也较少，基本只做一版，新建仓库有点浪费且麻烦。所以按照下面这种规范来处理：

- **master**：master 分支用于存放与业务无关的项目基础配置（如：目录结构、gulp 或 webpack 开发和生产环境配置等）；
- **act/xxxx**：活动分支（ 统一命名：`act/xxxx`）用于活动开发，每个活动一个分支（基于 master 分支派发：`git checkout master && git checkout -b act/xxxx`），不存在合并情况。

**注意：如果活动是长期维护、页面较多、业务比较复杂、维护较频繁，这种情况下，请新建一个单独的项目仓库按照常规项目规范来处理。**

## 说明

1. 每位开发者请务必遵守规范，如因不遵守规范而引发的问题，后果自负！
2. 规范会根据业务需求变化不定时的更新调整，请保持持续关注。
3. 项目中必须有.gitignore 文件，参考配置：[.gitignore](./.gitignore)

## Git 学习：

- [官网](https://git-scm.com/book/zh/v2)
- [廖雪峰-git 教程](https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000)
